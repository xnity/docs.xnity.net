function t(){return f||(f=caches.open(c)),f}function n(t){var n=new URL(t.url);return n.hash||n.search?(n.hash="",n.search="",new Request(n.toString())):t}function e(t){var n=Object.values(t.files);return console.log("Installing",n.length,"files from zip"),Promise.all(n.map(i))}function i(n){return n.dir?Promise.resolve():n.async("blob").then(function(e){return t().then(function(t){var i=new Response(e,{headers:{"Content-Type":s(n.name)}}),c=a(n.name,"/");console.log("-> Caching",n.name);var u=o+n.name;return"index.html"===c?Promise.all([t.put(o+r(n.name,"/"),i.clone()),t.put(u,i)]):t.put(u,i)})})}function r(t,n){return t.substring(0,t.lastIndexOf(n)+1)}function a(t,n){return t.substring(t.lastIndexOf(n)+1)}function s(t){return p[a(t,".")]||l}importScripts("_static/jszip.js");var o=registration.scope,c=function(){var t=o.split("/"),n=t.length-1;return"spongedocs-"+t[n-2]+"-"+t[n-1]}(),u=""+o+c+".zip",f;addEventListener("install",function(t){return t.waitUntil(caches.delete(c).then(function(){return fetch(u)}).then(function(t){return 200===t.status?t.arrayBuffer():Promise.reject(new Error(t.statusText))}).then(JSZip.loadAsync).then(e).then(self.skipWaiting()))}),addEventListener("activate",function(t){return t.waitUntil(self.clients.claim())}),addEventListener("fetch",function(e){return e.respondWith(t().then(function(t){return t.match(n(e.request))}).then(function(t){return t||fetch(e.request)}))});var l="application/octet-stream",p={html:"text/html",css:"text/css",js:"application/javascript",txt:"text/plain",jpg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",woff:"application/font-woff",woff2:"application/font-woff2"};